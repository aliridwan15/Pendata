
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tugas 2 data_understanding &#8212; Penambangan Data E</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Tugas2';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Local Outlier Factor" href="Local_Outlier_Factor.html" />
    <link rel="prev" title="Tugas1 Data_mining" href="Tugas1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/naga.jpg" class="logo__image only-light" alt="Penambangan Data E - Home"/>
    <img src="_static/naga.jpg" class="logo__image only-dark pst-js-only" alt="Penambangan Data E - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to my github account
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Data Mining (Penambangan Data)</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_understanding.html">Data Understanding</a></li>
<li class="toctree-l1"><a class="reference internal" href="Tugas1.html">Tugas1 Data_mining</a></li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#"><strong>Tugas 2 data_understanding</strong></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Local_Outlier_Factor.html">Local Outlier Factor</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FTugas2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Tugas2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tugas 2 data_understanding</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#penjelasan-outlier-deteksi"><strong>Penjelasan Outlier Deteksi</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier-dengan-k-nearest-neighbors-knn-dalam-data-understanding"><strong>Deteksi Outlier dengan K-Nearest Neighbors (KNN) dalam Data Understanding</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pengantar-outlier-dalam-data-understanding">1. Pengantar Outlier dalam Data Understanding</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#konsep-k-nearest-neighbors-knn-dalam-deteksi-outlier">2. Konsep K-Nearest Neighbors (KNN) dalam Deteksi Outlier</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kapan-menggunakan-knn-untuk-deteksi-outlier">Kapan Menggunakan KNN untuk Deteksi Outlier?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#perhitungan-k">Perhitungan K</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kesimpulan">Kesimpulan</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#instalasi-library-pymysql-dan-psycopg2-untuk-koneksi-database-di-python">Instalasi Library PyMySQL dan Psycopg2 untuk Koneksi Database di Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#import-library-untuk-analisis-data-visualisasi-dan-koneksi-database-dengan-python">Import Library untuk Analisis Data, Visualisasi, dan Koneksi Database dengan Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fungsi-untuk-mengambil-data-dari-database-postgresql-menggunakan-python">Fungsi untuk Mengambil Data dari Database PostgreSQL menggunakan Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fungsi-untuk-mengambil-data-dari-database-mysql-menggunakan-python">Fungsi untuk Mengambil Data dari Database MySQL menggunakan Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier-pada-data-iris-menggunakan-k-nearest-neighbors-knn">Deteksi Outlier pada Data Iris menggunakan K-Nearest Neighbors (KNN)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#menghitung-jumlah-outlier-pada-data-iris-menggunakan-knn">Menghitung Jumlah Outlier pada Data Iris menggunakan KNN</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#menampilkan-daftar-outlier-yang-terdeteksi">Menampilkan daftar outlier yang terdeteksi</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mengurutkan-data-berdasarkan-jarak-knn-untuk-identifikasi-outlier">Mengurutkan Data Berdasarkan Jarak KNN untuk Identifikasi Outlier</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#memisahkan-outlier-dari-data">Memisahkan Outlier dari Data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#menghitung-akurasi-dari-data">Menghitung Akurasi dari Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="tugas-2-data-understanding">
<h1><strong>Tugas 2 data_understanding</strong><a class="headerlink" href="#tugas-2-data-understanding" title="Link to this heading">#</a></h1>
<section id="penjelasan-outlier-deteksi">
<h2><strong>Penjelasan Outlier Deteksi</strong><a class="headerlink" href="#penjelasan-outlier-deteksi" title="Link to this heading">#</a></h2>
<section id="deteksi-outlier-dengan-k-nearest-neighbors-knn-dalam-data-understanding">
<h3><strong>Deteksi Outlier dengan K-Nearest Neighbors (KNN) dalam Data Understanding</strong><a class="headerlink" href="#deteksi-outlier-dengan-k-nearest-neighbors-knn-dalam-data-understanding" title="Link to this heading">#</a></h3>
<section id="pengantar-outlier-dalam-data-understanding">
<h4>1. Pengantar Outlier dalam Data Understanding<a class="headerlink" href="#pengantar-outlier-dalam-data-understanding" title="Link to this heading">#</a></h4>
<p>Outlier merupakan titik data dengan nilai yang jauh berbeda dibandingkan sebagian besar data dalam suatu dataset. Keberadaannya dapat disebabkan oleh berbagai faktor, seperti kesalahan dalam pengukuran, kesalahan input data, atau kejadian langka yang memang terjadi secara alami. Pada tahap pemahaman data (Data Understanding), mendeteksi outlier menjadi langkah krusial karena dapat memengaruhi hasil analisis, pemodelan, serta pengambilan keputusan. Jika outlier tidak teridentifikasi, model statistik atau machine learning berisiko menjadi bias, kurang akurat, atau bahkan gagal menghasilkan output yang valid.</p>
</section>
<section id="konsep-k-nearest-neighbors-knn-dalam-deteksi-outlier">
<h4>2. Konsep K-Nearest Neighbors (KNN) dalam Deteksi Outlier<a class="headerlink" href="#konsep-k-nearest-neighbors-knn-dalam-deteksi-outlier" title="Link to this heading">#</a></h4>
<p>K-Nearest Neighbors (KNN) merupakan salah satu algoritma yang dapat digunakan untuk mendeteksi outlier. Algoritma ini beroperasi dengan prinsip bahwa data yang normal umumnya berada dalam kelompok yang rapat, sedangkan outlier cenderung terletak jauh dari kelompok tersebut. Berikut adalah konsep dasar KNN dalam mendeteksi outlier:</p>
<ul class="simple">
<li><p>Prinsip Kerja KNN:</p></li>
</ul>
<p>KNN menentukan jarak antara suatu titik data dengan titik-titik lain di sekelilingnya. Jika sebuah titik memiliki jarak yang cukup jauh dibandingkan dengan sebagian besar tetangganya, maka titik tersebut dikategorikan sebagai outlier. Secara matematis, KNN menghitung jarak menggunakan metode seperti Euclidean, Manhattan, atau Minkowski terhadap k-tetangga terdekatnya. Jika rata-rata jarak ke k-tetangga tersebut melebihi ambang batas tertentu, maka titik data tersebut dianggap sebagai outlier.</p>
</section>
<section id="kapan-menggunakan-knn-untuk-deteksi-outlier">
<h4>Kapan Menggunakan KNN untuk Deteksi Outlier?<a class="headerlink" href="#kapan-menggunakan-knn-untuk-deteksi-outlier" title="Link to this heading">#</a></h4>
<p>KNN adalah metode yang efektif untuk deteksi outlier dalam situasi berikut:</p>
<p>Data Berdimensi Tinggi:
KNN mampu beroperasi dengan baik pada data yang memiliki banyak fitur atau berdimensi tinggi. Namun, jika jumlah dimensinya terlalu besar, performa algoritma ini dapat menurun akibat fenomena “curse of dimensionality”.</p>
<p>Data Tanpa Asumsi Distribusi:
KNN tidak bergantung pada asumsi mengenai distribusi data, sehingga dapat digunakan untuk data yang tidak mengikuti distribusi normal atau pola distribusi tertentu.</p>
<p>Dataset dengan Ukuran Sedang:
KNN lebih sesuai untuk dataset berukuran kecil hingga menengah, karena kompleksitas komputasinya meningkat seiring bertambahnya jumlah data. Untuk dataset yang sangat besar, metode lain seperti Local Outlier Factor (LOF) atau Isolation Forest dapat menjadi pilihan yang lebih efisien.</p>
</section>
<section id="perhitungan-k">
<h4>Perhitungan K<a class="headerlink" href="#perhitungan-k" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p>Menghitung Jarak (Euclidean Distance)
Jarak antara dua titik A (dengan koordinat <span class="math notranslate nohighlight">\((x_1, y_1)\)</span>  )) dan B (dengan koordinat <span class="math notranslate nohighlight">\((x_2, y_2)\)</span> )) dalam ruang dua dimensi dihitung dengan rumus:</p></li>
</ol>
<p><span class="math notranslate nohighlight">\(d(A, B) = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}\)</span></p>
<p>Untuk data berdimensi n, rumusnya menjadi:</p>
<p><span class="math notranslate nohighlight">\(d(A, B) = \sqrt{\sum_{i=1}^{n} (x_{i}^{A} - x_{i}^{B})^2}\)</span></p>
<p>di mana:</p>
<p><span class="math notranslate nohighlight">\(x_{i}^{A}\)</span> dan <span class="math notranslate nohighlight">\( x_{i}^{B}\)</span> adalah nilai fitur ke- <span class="math notranslate nohighlight">\(i \)</span> dari titik <span class="math notranslate nohighlight">\(A\)</span> dan <span class="math notranslate nohighlight">\( B\)</span>.</p>
<p><span class="math notranslate nohighlight">\(d(A, B)\)</span> adalah jarak antara dua titik.
2. Prediksi dengan Voting (untuk Klasifikasi)</p>
<p>Setelah menghitung jarak untuk semua data dalam dataset, ambil <span class="math notranslate nohighlight">\(K\)</span>  data dengan jarak terdekat, lalu gunakan metode mayoritas:</p>
<p><span class="math notranslate nohighlight">\({y} =\)</span> <span class="math notranslate nohighlight">\((y_1, y_2, ..., y_K)\)</span></p>
<p>di mana <span class="math notranslate nohighlight">\({y} =\)</span> <span class="math notranslate nohighlight">\((y_1, y_2, ..., y_K)\)</span> adalah label dari <span class="math notranslate nohighlight">\(K\)</span> tetangga terdekat.</p>
<ol class="arabic simple" start="3">
<li><p>Prediksi dengan Rata-rata (untuk Regresi)
Untuk regresi, prediksi nilai data baru adalah rata-rata dari  <span class="math notranslate nohighlight">\(K\)</span>  tetangga terdekat:</p></li>
</ol>
<p><span class="math notranslate nohighlight">\({y}\)</span> = <span class="math notranslate nohighlight">\({1}{K}\)</span> <span class="math notranslate nohighlight">\(_{i=1}^{K} y_i\)</span></p>
<p>di mana <span class="math notranslate nohighlight">\(y_1\)</span> dalah nilai target dari <span class="math notranslate nohighlight">\(K\)</span> tetangga terdekat.</p>
<ol class="arabic simple" start="4">
<li><p>Pemilihan <span class="math notranslate nohighlight">\(K\)</span> yang Optimal</p></li>
</ol>
<p>Biasanya, nilai <span class="math notranslate nohighlight">\(K\)</span> dipilih berdasarkan validasi silang (<em>cross-validation</em>) untuk menemukan keseimbangan antara bias dan varians.</p>
</section>
<section id="kesimpulan">
<h4>Kesimpulan<a class="headerlink" href="#kesimpulan" title="Link to this heading">#</a></h4>
<p>K-Nearest Neighbors (KNN) merupakan metode yang efektif untuk mendeteksi outlier, terutama pada tahap pemahaman data (Data Understanding). Metode ini bekerja dengan prinsip jarak untuk mengenali titik data yang secara signifikan berbeda dari mayoritas data lainnya. Meskipun KNN menawarkan fleksibilitas dan kemudahan dalam implementasi, metode ini juga memiliki keterbatasan, terutama dalam aspek komputasi dan pemilihan parameter. Oleh karena itu, sebelum menggunakan KNN untuk deteksi outlier, penting untuk mempertimbangkan karakteristik dataset serta kebutuhan analisis.</p>
<p>Dalam aplikasinya, KNN sering dikombinasikan dengan teknik lain, seperti visualisasi data menggunakan scatter plot atau box plot, guna memverifikasi hasil deteksi outlier serta meningkatkan kualitas data sebelum melangkah ke tahap pemodelan.</p>
</section>
<section id="instalasi-library-pymysql-dan-psycopg2-untuk-koneksi-database-di-python">
<h4>Instalasi Library PyMySQL dan Psycopg2 untuk Koneksi Database di Python<a class="headerlink" href="#instalasi-library-pymysql-dan-psycopg2-untuk-koneksi-database-di-python" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install pymysql
<span class="o">%</span><span class="k">pip</span> install psycopg2
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pymysql in /usr/local/python/3.12.1/lib/python3.12/site-packages (1.1.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: psycopg2 in /usr/local/python/3.12.1/lib/python3.12/site-packages (2.9.10)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple">
<li></li>
</ol>
<p>Perintah ini saya gunakan untuk menginstal library pymysql, yang merupakan driver Python untuk berkomunikasi dengan database MySQL atau MariaDB. Dengan pymysql, saya bisa membuat koneksi ke database, menjalankan query SQL, serta melakukan operasi CRUD (Create, Read, Update, Delete) pada tabel-tabel yang ada. Ini berguna saat saya mengembangkan aplikasi berbasis database, terutama dalam proyek-proyek berbasis web atau sistem berbasis data.</p>
<ol class="arabic simple" start="2">
<li></li>
</ol>
<p>Perintah ini saya gunakan untuk menginstal psycopg2, yang merupakan driver PostgreSQL untuk Python. PostgreSQL adalah database relasional open-source yang cukup powerful dan sering digunakan dalam aplikasi enterprise maupun web. Dengan psycopg2, saya bisa menghubungkan Python dengan database PostgreSQL untuk menjalankan query SQL, mengelola transaksi, serta memanipulasi data dengan efisien.</p>
</section>
<section id="import-library-untuk-analisis-data-visualisasi-dan-koneksi-database-dengan-python">
<h4>Import Library untuk Analisis Data, Visualisasi, dan Koneksi Database dengan Python<a class="headerlink" href="#import-library-untuk-analisis-data-visualisasi-dan-koneksi-database-dengan-python" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="kn">import</span> <span class="nn">pymysql</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">scipy.spatial.distance</span> <span class="kn">import</span> <span class="n">euclidean</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">NearestNeighbors</span>
</pre></div>
</div>
</div>
</div>
<p>Di sini saya mengimpor beberapa library yang dibutuhkan untuk menjalankan skrip analisis data dan deteksi outlier:</p>
<ol class="arabic simple">
<li><p>import psycopg2
→ Digunakan untuk menghubungkan Python dengan database PostgreSQL. Library ini memungkinkan eksekusi query SQL, pengambilan data, serta pengelolaan transaksi di PostgreSQL.</p></li>
<li><p>import pymysql
→ Digunakan untuk menghubungkan Python dengan database MySQL. Dengan library ini, Anda bisa mengambil dan memanipulasi data dari MySQL secara langsung melalui koneksi Python.</p></li>
<li><p>import numpy as np
→ Library utama untuk komputasi numerik. Digunakan untuk operasi pada array, perhitungan matematis, dan manipulasi data berbasis angka, seperti perhitungan jarak Euclidean dan analisis numerik lainnya.</p></li>
<li><p>import pandas as pd
→ Library yang digunakan untuk mengelola data dalam bentuk DataFrame, yaitu struktur data yang mudah dibaca dan diolah, sangat cocok untuk analisis data.</p></li>
<li><p>import seaborn as sns
→ Library visualisasi berbasis matplotlib yang lebih menarik dan interaktif. Digunakan untuk membuat grafik seperti scatter plot yang menampilkan distribusi data dan outlier.</p></li>
<li><p>import matplotlib.pyplot as plt
→ Modul dari matplotlib yang berfungsi untuk membuat berbagai jenis grafik seperti scatter plot, line plot, dan lain-lain. Dalam skrip ini, digunakan untuk menampilkan visualisasi hasil deteksi outlier.</p></li>
<li><p>from scipy.spatial.distance import euclidean
→ Digunakan untuk menghitung jarak Euclidean antara dua titik dalam ruang multidimensi. Ini penting untuk menghitung jarak antar titik pada data numerik saat mendeteksi outlier.</p></li>
<li><p>from sklearn.neighbors import NearestNeighbors
→ Bagian dari scikit-learn yang digunakan untuk algoritma K-Nearest Neighbors (KNN). Dalam skrip ini, digunakan untuk mendeteksi outlier dengan menghitung rata-rata jarak ke beberapa tetangga terdekat.</p></li>
</ol>
<p>Kesimpulannya, library yang diimpor ini berfungsi untuk mengambil data dari database, melakukan perhitungan matematis, dan memvisualisasikan hasil analisis.</p>
</section>
<section id="fungsi-untuk-mengambil-data-dari-database-postgresql-menggunakan-python">
<h4>Fungsi untuk Mengambil Data dari Database PostgreSQL menggunakan Python<a class="headerlink" href="#fungsi-untuk-mengambil-data-dari-database-postgresql-menggunakan-python" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_pg_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;pendat23-posgreesql.g.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_ahuC43u5vzmRtJaxiSx&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;defaultdb&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">26340</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM iris_postgresql&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Penjelasan skrip yang saya buat</p>
<ol class="arabic simple">
<li><p><strong>Membuat Koneksi ke Database</strong><br />
Koneksi ke database PostgreSQL dibuat menggunakan <code class="docutils literal notranslate"><span class="pre">psycopg2.connect()</span></code> dengan parameter host, user, password, database, dan port yang sesuai.</p></li>
<li><p><strong>Membuat Objek Cursor</strong><br />
Objek cursor dibuat untuk mengeksekusi perintah SQL.</p></li>
<li><p><strong>Menjalankan Query SQL</strong><br />
Query <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">iris_postgresql</span></code> dijalankan untuk mengambil semua data dari tabel tersebut.</p></li>
<li><p><strong>Mengambil Hasil Query</strong><br />
Data hasil query diambil dalam bentuk list tuple menggunakan <code class="docutils literal notranslate"><span class="pre">fetchall()</span></code>.</p></li>
<li><p><strong>Mendapatkan Nama Kolom</strong><br />
Nama kolom diperoleh melalui atribut <code class="docutils literal notranslate"><span class="pre">cursor.description</span></code> agar dapat digunakan sebagai header DataFrame.</p></li>
<li><p><strong>Menutup Koneksi</strong><br />
Cursor dan koneksi database ditutup untuk mencegah kebocoran sumber daya.</p></li>
<li><p><strong>Mengembalikan Data dalam DataFrame</strong><br />
Data yang diambil dikonversi menjadi DataFrame pandas agar lebih mudah diproses dan dianalisis.</p></li>
</ol>
</section>
<section id="fungsi-untuk-mengambil-data-dari-database-mysql-menggunakan-python">
<h4>Fungsi untuk Mengambil Data dari Database MySQL menggunakan Python<a class="headerlink" href="#fungsi-untuk-mengambil-data-dari-database-mysql-menggunakan-python" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_mysql_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;mysql-aliridwan-mysql23.h.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_FuVRxg5O9IiRcCsBYdY&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;defaultdb&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">14789</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM irismysql&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Penjelasan skrip yang saya buat:</p>
<ol class="arabic simple">
<li><p><strong>Membuat Koneksi ke Database</strong><br />
Koneksi ke database MySQL dibuat menggunakan <code class="docutils literal notranslate"><span class="pre">pymysql.connect()</span></code> dengan parameter host, user, password, database, dan port yang sesuai.</p></li>
<li><p><strong>Membuat Objek Cursor</strong><br />
Objek cursor dibuat untuk menjalankan perintah SQL pada database.</p></li>
<li><p><strong>Menjalankan Query SQL</strong><br />
Query <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">irismysql</span></code> dijalankan untuk mengambil semua data dari tabel <code class="docutils literal notranslate"><span class="pre">irismysql</span></code>.</p></li>
<li><p><strong>Mengambil Hasil Query</strong><br />
Data hasil query diambil dalam bentuk list tuple menggunakan <code class="docutils literal notranslate"><span class="pre">fetchall()</span></code>.</p></li>
<li><p><strong>Mendapatkan Nama Kolom</strong><br />
Nama kolom diperoleh dari atribut <code class="docutils literal notranslate"><span class="pre">cursor.description</span></code>, yang kemudian diolah agar bisa digunakan sebagai header DataFrame.</p></li>
<li><p><strong>Menutup Koneksi</strong><br />
Cursor dan koneksi database ditutup untuk menghindari kebocoran sumber daya.</p></li>
<li><p><strong>Mengembalikan Data dalam DataFrame</strong><br />
Data yang diambil dikonversi menjadi DataFrame pandas agar lebih mudah diproses dan dianalisis.</p></li>
</ol>
</section>
<section id="deteksi-outlier-pada-data-iris-menggunakan-k-nearest-neighbors-knn">
<h4>Deteksi Outlier pada Data Iris menggunakan K-Nearest Neighbors (KNN)<a class="headerlink" href="#deteksi-outlier-pada-data-iris-menggunakan-k-nearest-neighbors-knn" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ambil data dari kedua database</span>
<span class="n">df_postgresql</span> <span class="o">=</span> <span class="n">get_pg_data</span><span class="p">()</span>
<span class="n">df_mysql</span> <span class="o">=</span> <span class="n">get_mysql_data</span><span class="p">()</span>

<span class="c1"># Gabungkan berdasarkan kolom &#39;id&#39; dan &#39;Class&#39;</span>
<span class="n">df_merged</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_mysql</span><span class="p">,</span> <span class="n">df_postgresql</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="c1"># Ambil data fitur numerik</span>
<span class="n">feature_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">]</span>
<span class="n">data_values</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="n">feature_columns</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Gunakan KNN untuk mendeteksi outlier</span>
<span class="n">K</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># Jumlah tetangga terdekat</span>
<span class="n">nbrs</span> <span class="o">=</span> <span class="n">NearestNeighbors</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="n">K</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;euclidean&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data_values</span><span class="p">)</span>
<span class="n">distances</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">nbrs</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">(</span><span class="n">data_values</span><span class="p">)</span>

<span class="c1"># Ambil rata-rata jarak ke K tetangga terdekat (tidak termasuk jarak ke dirinya sendiri)</span>
<span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">distances</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Tentukan threshold outlier berdasarkan persentil ke-95</span>
<span class="n">threshold</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">],</span> <span class="mi">95</span><span class="p">)</span>
<span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">threshold</span>

<span class="c1"># Cetak hasil data dengan outlier</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_merged</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="c1"># Visualisasi scatter plot dengan warna berdasarkan outlier</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">],</span>
    <span class="n">hue</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="p">{</span><span class="kc">False</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Outlier Detection with KNN (Sepal)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">],</span>
    <span class="n">hue</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="p">{</span><span class="kc">False</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Outlier Detection with KNN (Petal)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> id           class  petal_length  petal_width  sepal_length  sepal_width  knn_distance  outlier
  1     Iris-setosa           1.4          0.2           5.1          3.5      0.133137    False
  2     Iris-setosa          14.0          2.0          49.0         30.0     14.671703     True
  3     Iris-setosa           1.3          0.2           4.7          3.2      0.247029    False
  4     Iris-setosa          15.0         20.0          46.0         31.0     16.464817     True
  5     Iris-setosa           1.4          0.2           5.0          3.6      0.191277    False
  6     Iris-setosa           1.7          0.4           5.4          3.9      0.360018    False
  7     Iris-setosa           1.4          0.3           4.6          3.4      0.308980    False
  8     Iris-setosa           1.5          0.2           5.0          3.4      0.167647    False
  9     Iris-setosa           1.4          0.2           4.4          2.9      0.317776    False
 10     Iris-setosa           1.5          0.1           4.9          3.1      0.109282    False
 11     Iris-setosa           1.5          0.2           5.4          3.7      0.269234    False
 12     Iris-setosa          16.0         20.0          48.0         34.0     16.114105     True
 13     Iris-setosa           1.4          0.1           4.8          3.0      0.192913    False
 14     Iris-setosa           1.1          0.1           4.3          3.0      0.377434    False
 15     Iris-setosa           1.2          0.2           5.8          4.0      0.513789    False
 16     Iris-setosa           1.5          0.4           5.7          4.4      0.556295    False
 17     Iris-setosa           1.3          0.4           5.4          3.9      0.376312    False
 18     Iris-setosa           1.4          0.3           5.1          3.5      0.152207    False
 19     Iris-setosa           1.7          0.3           5.7          3.8      0.451068    False
 20     Iris-setosa           1.5          0.3           5.1          3.8      0.259767    False
 21     Iris-setosa          17.0          2.0          54.0         34.0     14.514526     True
 22     Iris-setosa          15.0          4.0          51.0         37.0     14.140652     True
 23     Iris-setosa           1.0          0.2           4.6          3.6      0.518395    False
 24     Iris-setosa           1.7          0.5           5.1          3.3      0.322668    False
 25     Iris-setosa           1.9          0.2           4.8          3.4      0.427507    False
 26     Iris-setosa           1.6          0.2           5.0          3.0      0.224721    False
 27     Iris-setosa           1.6          0.4           5.0          3.4      0.231348    False
 28     Iris-setosa           1.5          0.2           5.2          3.5      0.164215    False
 29     Iris-setosa           1.4          0.2           5.2          3.4      0.164215    False
 30     Iris-setosa           1.6          0.2           4.7          3.2      0.231751    False
 31     Iris-setosa           1.6          0.2           4.8          3.1      0.176929    False
 32     Iris-setosa           1.5          0.4           5.4          3.4      0.324639    False
 33     Iris-setosa           1.5          0.1           5.2          4.1      0.389902    False
 34     Iris-setosa           1.4          0.2           5.5          4.2      0.397231    False
 35     Iris-setosa           1.5          0.1           4.9          3.1      0.109282    False
 36     Iris-setosa           1.2          0.2           5.0          3.2      0.312863    False
 37     Iris-setosa           1.3          0.2           5.5          3.5      0.330971    False
 38     Iris-setosa           1.5          0.1           4.9          3.1      0.109282    False
 39     Iris-setosa           1.3          0.2           4.4          3.0      0.249385    False
 40     Iris-setosa           1.5          0.2           5.1          3.4      0.139494    False
 41     Iris-setosa           1.3          0.3           5.0          3.5      0.195546    False
 42     Iris-setosa           1.3          0.3           4.5          2.3      0.736302    False
 43     Iris-setosa           1.3          0.2           4.4          3.2      0.271212    False
 44     Iris-setosa           1.6          0.6           5.0          3.5      0.342175    False
 45     Iris-setosa           1.9          0.4           5.1          3.8      0.425323    False
 46     Iris-setosa           1.4          0.3           4.8          3.0      0.247735    False
 47     Iris-setosa           1.6          0.2           5.1          3.8      0.269939    False
 48     Iris-setosa           1.4          0.2           4.6          3.2      0.222448    False
 49     Iris-setosa           1.5          0.2           5.3          3.7      0.222701    False
 50     Iris-setosa           1.4          0.2           5.0          3.3      0.197089    False
 51 Iris-versicolor           4.7          1.4           7.0          3.2      0.405780    False
 52 Iris-versicolor           4.5          1.5           6.4          3.2      0.337735    False
 53 Iris-versicolor           4.9          1.5           6.9          3.1      0.404929    False
 54 Iris-versicolor           4.0          1.3           5.5          2.3      0.337602    False
 55 Iris-versicolor           4.6          1.5           6.5          2.8      0.375224    False
 56 Iris-versicolor           4.5          1.3           5.7          2.8      0.342490    False
 57 Iris-versicolor           4.7          1.6           6.3          3.3      0.395904    False
 58 Iris-versicolor           3.3          1.0           4.9          2.4      0.716200    False
 59 Iris-versicolor          46.0         13.0          66.0         29.0     14.053803    False
 60 Iris-versicolor           3.9          1.4           5.2          2.7      0.496896    False
 61 Iris-versicolor          35.0         10.0          50.0         20.0     18.096639     True
 62 Iris-versicolor           4.2          1.5           5.9          3.0      0.345388    False
 63 Iris-versicolor           4.0          1.0           6.0          2.2      0.544685    False
 64 Iris-versicolor           4.7          1.4           6.1          2.9      0.294026    False
 65 Iris-versicolor           3.6          1.3           5.6          2.9      0.487902    False
 66 Iris-versicolor           4.4          1.4           6.7          3.1      0.323124    False
 67 Iris-versicolor          45.0         15.0          56.0         30.0     13.099746    False
 68 Iris-versicolor           4.1          1.0           5.8          2.7      0.318835    False
 69 Iris-versicolor           4.5          1.5           6.2          2.2      0.539667    False
 70 Iris-versicolor           3.9          1.1           5.6          2.5      0.249461    False
 71 Iris-versicolor           4.8          1.8           5.9          3.2      0.355494    False
 72 Iris-versicolor           4.0          1.3           6.1          2.8      0.372910    False
 73 Iris-versicolor           4.9          1.5           6.3          2.5      0.398715    False
 74 Iris-versicolor           4.7          1.2           6.1          2.8      0.361011    False
 75 Iris-versicolor           4.3          1.3           6.4          2.9      0.330296    False
 76 Iris-versicolor           4.4          1.4           6.6          3.0      0.276972    False
 77 Iris-versicolor           4.8          1.4           6.8          2.8      0.403028    False
 78 Iris-versicolor          50.0         17.0          67.0         30.0     12.449288    False
 79 Iris-versicolor           4.5          1.5           6.0          2.9      0.299437    False
 80 Iris-versicolor           3.5          1.0           5.7          2.6      0.424564    False
 81 Iris-versicolor           3.8          1.1           5.5          2.4      0.267778    False
 82 Iris-versicolor           3.7          1.0           5.5          2.4      0.324837    False
 83 Iris-versicolor           3.9          1.2           5.8          2.7      0.267050    False
 84 Iris-versicolor           5.1          1.6           6.0          2.7      0.367850    False
 85 Iris-versicolor           4.5          1.5           5.4          3.0      0.482262    False
 86 Iris-versicolor           4.5          1.6           6.0          3.4      0.447126    False
 87 Iris-versicolor           4.7          1.5           6.7          3.1      0.324711    False
 88 Iris-versicolor           4.4          1.3           6.3          2.3      0.531071    False
 89 Iris-versicolor           4.1          1.3           5.6          3.0      0.252082    False
 90 Iris-versicolor           4.0          1.3           5.5          2.5      0.275322    False
 91 Iris-versicolor           4.4          1.2           5.5          2.6      0.370719    False
 92 Iris-versicolor           4.6          1.4           6.1          3.0      0.275026    False
 93 Iris-versicolor           4.0          1.2           5.8          2.6      0.246350    False
 94 Iris-versicolor          33.0         10.0          50.0         23.0     16.878893     True
 95 Iris-versicolor           4.2          1.3           5.6          2.7      0.255523    False
 96 Iris-versicolor           4.2          1.2           5.7          3.0      0.250359    False
 97 Iris-versicolor           4.2          1.3           5.7          2.9      0.195931    False
 98 Iris-versicolor           4.3          1.3           6.2          2.9      0.322356    False
 99 Iris-versicolor           3.0          1.1           5.1          2.5      0.759912    False
100 Iris-versicolor           4.1          1.3           5.7          2.8      0.209551    False
101  Iris-virginica           6.0          2.5           6.3          3.3      0.519844    False
102  Iris-virginica           5.1          1.9           5.8          2.7      0.254604    False
103  Iris-virginica           5.9          2.1           7.1          3.0      0.431573    False
104  Iris-virginica           5.6          1.8           6.3          2.9      0.326625    False
105  Iris-virginica           5.8          2.2           6.5          3.0      0.350276    False
106  Iris-virginica          66.0         21.0          76.0         30.0     13.843757    False
107  Iris-virginica           4.5          1.7           4.9          2.5      0.810164    False
108  Iris-virginica           6.3          1.8           7.3          2.9      0.482648    False
109  Iris-virginica           5.8          1.8           6.7          2.5      0.602832    False
110  Iris-virginica          61.0         25.0          72.0         36.0     12.240420    False
111  Iris-virginica           5.1          2.0           6.5          3.2      0.396195    False
112  Iris-virginica           5.3          1.9           6.4          2.7      0.373868    False
113  Iris-virginica           5.5          2.1           6.8          3.0      0.325700    False
114  Iris-virginica           5.0          2.0           5.7          2.5      0.385630    False
115  Iris-virginica           5.1          2.4           5.8          2.8      0.533926    False
116  Iris-virginica           5.3          2.3           6.4          3.2      0.364586    False
117  Iris-virginica           5.5          1.8           6.5          3.0      0.304304    False
118  Iris-virginica          67.0         22.0          77.0         38.0     13.461937    False
119  Iris-virginica           6.9          2.3           7.7          2.6      0.889493    False
120  Iris-virginica           5.0          1.5           6.0          2.2      0.546572    False
121  Iris-virginica           5.7          2.3           6.9          3.2      0.289747    False
122  Iris-virginica           4.9          2.0           5.6          2.8      0.382455    False
123  Iris-virginica           6.7          2.0           7.7          2.8      0.673671    False
124  Iris-virginica           4.9          1.8           6.3          2.7      0.350507    False
125  Iris-virginica           5.7          2.1           6.7          3.3      0.350372    False
126  Iris-virginica           6.0          1.8           7.2          3.2      0.457343    False
127  Iris-virginica          48.0         18.0          62.0         38.0     14.631644     True
128  Iris-virginica           4.9          1.8           6.1          3.0      0.301817    False
129  Iris-virginica           5.6          2.1           6.4          2.8      0.301871    False
130  Iris-virginica           5.8          1.6           7.2          3.0      0.527962    False
131  Iris-virginica           6.1          1.9           7.4          2.8      0.448059    False
132  Iris-virginica          64.0         20.0          79.0         38.0     13.207079    False
133  Iris-virginica           5.6          2.2           6.4          2.8      0.345839    False
134  Iris-virginica           5.1          1.5           6.3          2.8      0.398736    False
135  Iris-virginica           5.6          1.4           6.1          2.6      0.608343    False
136  Iris-virginica           6.1          2.3           7.7          3.0      0.664339    False
137  Iris-virginica           5.6          2.4           6.3          3.4      0.398480    False
138  Iris-virginica           5.5          1.8           6.4          3.1      0.333563    False
139  Iris-virginica           4.8          1.8           6.0          3.0      0.310607    False
140  Iris-virginica           5.4          2.1           6.9          3.1      0.336158    False
141  Iris-virginica           5.6          2.4           6.7          3.1      0.312580    False
142  Iris-virginica           5.1          2.3           6.9          3.1      0.420813    False
143  Iris-virginica           5.1          1.9           5.8          2.7      0.254604    False
144  Iris-virginica           5.9          2.3           6.8          3.2      0.317954    False
145  Iris-virginica           5.7          2.5           6.7          3.3      0.339413    False
146  Iris-virginica           5.2          2.3           6.7          3.0      0.342878    False
147  Iris-virginica           5.0          1.9           6.3          2.5      0.404182    False
148  Iris-virginica           5.2          2.0           6.5          3.0      0.335685    False
149  Iris-virginica           5.4          2.3           6.2          3.4      0.468533    False
150  Iris-virginica           5.1          1.8           5.9          3.0      0.324590    False
</pre></div>
</div>
<img alt="_images/0e8f3e46a8b3a36cf8e03fd3217ab2878190d977e43695b88bfad8902b7142ad.png" src="_images/0e8f3e46a8b3a36cf8e03fd3217ab2878190d977e43695b88bfad8902b7142ad.png" />
<img alt="_images/0c0915945b7d8aed9c52d071c43284177728e6761c77ed0ecb9ecbbde78badc6.png" src="_images/0c0915945b7d8aed9c52d071c43284177728e6761c77ed0ecb9ecbbde78badc6.png" />
</div>
</div>
<p>Penjelasan Skrip diatas:</p>
<ol class="arabic simple">
<li><p><strong>Mengambil Data</strong><br />
Data diambil dari dua database berbeda, PostgreSQL dan MySQL, menggunakan fungsi tertentu, lalu disimpan dalam DataFrame pandas.</p></li>
<li><p><strong>Menggabungkan Data</strong><br />
Kedua DataFrame digabungkan menggunakan inner join berdasarkan kolom <code class="docutils literal notranslate"><span class="pre">id</span></code> dan <code class="docutils literal notranslate"><span class="pre">class</span></code>, sehingga hanya data dengan kedua nilai yang sesuai yang dipertahankan.</p></li>
<li><p><strong>Memilih Kolom Fitur Numerik</strong><br />
Empat kolom fitur numerik dipilih, yaitu <code class="docutils literal notranslate"><span class="pre">petal_length</span></code>, <code class="docutils literal notranslate"><span class="pre">petal_width</span></code>, <code class="docutils literal notranslate"><span class="pre">sepal_length</span></code>, dan <code class="docutils literal notranslate"><span class="pre">sepal_width</span></code>, untuk digunakan dalam perhitungan jarak.</p></li>
<li><p><strong>Menentukan Titik Referensi</strong><br />
Titik referensi untuk perhitungan jarak Euclidean ditentukan menggunakan baris terakhir dari data tersebut.</p></li>
<li><p><strong>Menghitung Jarak Euclidean</strong><br />
Fungsi khusus digunakan untuk menghitung jarak Euclidean antara setiap titik data dengan titik referensi. Hasilnya disimpan dalam kolom <code class="docutils literal notranslate"><span class="pre">distance</span></code>.</p></li>
<li><p><strong>Menentukan Threshold Outlier</strong><br />
Threshold outlier ditentukan berdasarkan persentil ke-93.5 dari kolom jarak Euclidean. Data yang jaraknya melebihi nilai ini dianggap outlier.</p></li>
<li><p><strong>Mencetak Hasil</strong><br />
Hasil akhir mencakup semua data beserta informasi apakah data tersebut outlier atau tidak.</p></li>
<li><p><strong>Visualisasi Scatter Plot</strong><br />
Dua scatter plot dibuat:</p>
<ul class="simple">
<li><p>Scatter plot pertama menampilkan data berdasarkan <code class="docutils literal notranslate"><span class="pre">sepal_length</span></code> dan <code class="docutils literal notranslate"><span class="pre">sepal_width</span></code>.</p></li>
<li><p>Scatter plot kedua menampilkan data berdasarkan <code class="docutils literal notranslate"><span class="pre">petal_length</span></code> dan <code class="docutils literal notranslate"><span class="pre">petal_width</span></code>.<br />
Pada kedua plot, titik biru menunjukkan data normal, sedangkan titik merah menunjukkan outlier.</p></li>
</ul>
</li>
</ol>
</section>
<section id="menghitung-jumlah-outlier-pada-data-iris-menggunakan-knn">
<h4>Menghitung Jumlah Outlier pada Data Iris menggunakan KNN<a class="headerlink" href="#menghitung-jumlah-outlier-pada-data-iris-menggunakan-knn" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hitung total outlier</span>
<span class="n">total_outliers</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total Outlier: </span><span class="si">{</span><span class="n">total_outliers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total Outlier: 8
</pre></div>
</div>
</div>
</div>
<ol class="arabic simple">
<li><p>df_merged[“outlier”].sum()</p></li>
</ol>
<p>→ Saya menghitung jumlah total outlier dalam dataset.</p>
<p>Kolom outlier berisi nilai True (1) jika data adalah outlier dan False (0) jika bukan.
Fungsi .sum() menjumlahkan semua nilai True (1), sehingga menghasilkan total jumlah outlier.
2. print(f”Total Outlier: {total_outliers}”)</p>
<p>→ Saya mencetak jumlah total outlier dengan format string (f-string).</p>
</section>
<section id="menampilkan-daftar-outlier-yang-terdeteksi">
<h4>Menampilkan daftar outlier yang terdeteksi<a class="headerlink" href="#menampilkan-daftar-outlier-yang-terdeteksi" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outliers</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Outlier Teratas:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">outliers</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Outlier Teratas:
 id           class  petal_length  petal_width  sepal_length  sepal_width  knn_distance  outlier
 61 Iris-versicolor          35.0         10.0          50.0         20.0     18.096639     True
 94 Iris-versicolor          33.0         10.0          50.0         23.0     16.878893     True
  4     Iris-setosa          15.0         20.0          46.0         31.0     16.464817     True
 12     Iris-setosa          16.0         20.0          48.0         34.0     16.114105     True
  2     Iris-setosa          14.0          2.0          49.0         30.0     14.671703     True
127  Iris-virginica          48.0         18.0          62.0         38.0     14.631644     True
 21     Iris-setosa          17.0          2.0          54.0         34.0     14.514526     True
 22     Iris-setosa          15.0          4.0          51.0         37.0     14.140652     True
</pre></div>
</div>
</div>
</div>
</section>
<section id="mengurutkan-data-berdasarkan-jarak-knn-untuk-identifikasi-outlier">
<h4>Mengurutkan Data Berdasarkan Jarak KNN untuk Identifikasi Outlier<a class="headerlink" href="#mengurutkan-data-berdasarkan-jarak-knn-untuk-identifikasi-outlier" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Urutkan data berdasarkan jarak dari terkecil ke terbesar</span>
<span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df_merged</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Tampilkan hasilnya</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_sorted</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> id           class  petal_length  petal_width  sepal_length  sepal_width  knn_distance  outlier
 10     Iris-setosa           1.5          0.1           4.9          3.1      0.109282    False
 35     Iris-setosa           1.5          0.1           4.9          3.1      0.109282    False
 38     Iris-setosa           1.5          0.1           4.9          3.1      0.109282    False
  1     Iris-setosa           1.4          0.2           5.1          3.5      0.133137    False
 40     Iris-setosa           1.5          0.2           5.1          3.4      0.139494    False
 18     Iris-setosa           1.4          0.3           5.1          3.5      0.152207    False
 28     Iris-setosa           1.5          0.2           5.2          3.5      0.164215    False
 29     Iris-setosa           1.4          0.2           5.2          3.4      0.164215    False
  8     Iris-setosa           1.5          0.2           5.0          3.4      0.167647    False
 31     Iris-setosa           1.6          0.2           4.8          3.1      0.176929    False
  5     Iris-setosa           1.4          0.2           5.0          3.6      0.191277    False
 13     Iris-setosa           1.4          0.1           4.8          3.0      0.192913    False
 41     Iris-setosa           1.3          0.3           5.0          3.5      0.195546    False
 97 Iris-versicolor           4.2          1.3           5.7          2.9      0.195931    False
 50     Iris-setosa           1.4          0.2           5.0          3.3      0.197089    False
100 Iris-versicolor           4.1          1.3           5.7          2.8      0.209551    False
 48     Iris-setosa           1.4          0.2           4.6          3.2      0.222448    False
 49     Iris-setosa           1.5          0.2           5.3          3.7      0.222701    False
 26     Iris-setosa           1.6          0.2           5.0          3.0      0.224721    False
 27     Iris-setosa           1.6          0.4           5.0          3.4      0.231348    False
 30     Iris-setosa           1.6          0.2           4.7          3.2      0.231751    False
 93 Iris-versicolor           4.0          1.2           5.8          2.6      0.246350    False
  3     Iris-setosa           1.3          0.2           4.7          3.2      0.247029    False
 46     Iris-setosa           1.4          0.3           4.8          3.0      0.247735    False
 39     Iris-setosa           1.3          0.2           4.4          3.0      0.249385    False
 70 Iris-versicolor           3.9          1.1           5.6          2.5      0.249461    False
 96 Iris-versicolor           4.2          1.2           5.7          3.0      0.250359    False
 89 Iris-versicolor           4.1          1.3           5.6          3.0      0.252082    False
102  Iris-virginica           5.1          1.9           5.8          2.7      0.254604    False
143  Iris-virginica           5.1          1.9           5.8          2.7      0.254604    False
 95 Iris-versicolor           4.2          1.3           5.6          2.7      0.255523    False
 20     Iris-setosa           1.5          0.3           5.1          3.8      0.259767    False
 83 Iris-versicolor           3.9          1.2           5.8          2.7      0.267050    False
 81 Iris-versicolor           3.8          1.1           5.5          2.4      0.267778    False
 11     Iris-setosa           1.5          0.2           5.4          3.7      0.269234    False
 47     Iris-setosa           1.6          0.2           5.1          3.8      0.269939    False
 43     Iris-setosa           1.3          0.2           4.4          3.2      0.271212    False
 92 Iris-versicolor           4.6          1.4           6.1          3.0      0.275026    False
 90 Iris-versicolor           4.0          1.3           5.5          2.5      0.275322    False
 76 Iris-versicolor           4.4          1.4           6.6          3.0      0.276972    False
121  Iris-virginica           5.7          2.3           6.9          3.2      0.289747    False
 64 Iris-versicolor           4.7          1.4           6.1          2.9      0.294026    False
 79 Iris-versicolor           4.5          1.5           6.0          2.9      0.299437    False
128  Iris-virginica           4.9          1.8           6.1          3.0      0.301817    False
129  Iris-virginica           5.6          2.1           6.4          2.8      0.301871    False
117  Iris-virginica           5.5          1.8           6.5          3.0      0.304304    False
  7     Iris-setosa           1.4          0.3           4.6          3.4      0.308980    False
139  Iris-virginica           4.8          1.8           6.0          3.0      0.310607    False
141  Iris-virginica           5.6          2.4           6.7          3.1      0.312580    False
 36     Iris-setosa           1.2          0.2           5.0          3.2      0.312863    False
  9     Iris-setosa           1.4          0.2           4.4          2.9      0.317776    False
144  Iris-virginica           5.9          2.3           6.8          3.2      0.317954    False
 68 Iris-versicolor           4.1          1.0           5.8          2.7      0.318835    False
 98 Iris-versicolor           4.3          1.3           6.2          2.9      0.322356    False
 24     Iris-setosa           1.7          0.5           5.1          3.3      0.322668    False
 66 Iris-versicolor           4.4          1.4           6.7          3.1      0.323124    False
150  Iris-virginica           5.1          1.8           5.9          3.0      0.324590    False
 32     Iris-setosa           1.5          0.4           5.4          3.4      0.324639    False
 87 Iris-versicolor           4.7          1.5           6.7          3.1      0.324711    False
 82 Iris-versicolor           3.7          1.0           5.5          2.4      0.324837    False
113  Iris-virginica           5.5          2.1           6.8          3.0      0.325700    False
104  Iris-virginica           5.6          1.8           6.3          2.9      0.326625    False
 75 Iris-versicolor           4.3          1.3           6.4          2.9      0.330296    False
 37     Iris-setosa           1.3          0.2           5.5          3.5      0.330971    False
138  Iris-virginica           5.5          1.8           6.4          3.1      0.333563    False
148  Iris-virginica           5.2          2.0           6.5          3.0      0.335685    False
140  Iris-virginica           5.4          2.1           6.9          3.1      0.336158    False
 54 Iris-versicolor           4.0          1.3           5.5          2.3      0.337602    False
 52 Iris-versicolor           4.5          1.5           6.4          3.2      0.337735    False
145  Iris-virginica           5.7          2.5           6.7          3.3      0.339413    False
 44     Iris-setosa           1.6          0.6           5.0          3.5      0.342175    False
 56 Iris-versicolor           4.5          1.3           5.7          2.8      0.342490    False
146  Iris-virginica           5.2          2.3           6.7          3.0      0.342878    False
 62 Iris-versicolor           4.2          1.5           5.9          3.0      0.345388    False
133  Iris-virginica           5.6          2.2           6.4          2.8      0.345839    False
105  Iris-virginica           5.8          2.2           6.5          3.0      0.350276    False
125  Iris-virginica           5.7          2.1           6.7          3.3      0.350372    False
124  Iris-virginica           4.9          1.8           6.3          2.7      0.350507    False
 71 Iris-versicolor           4.8          1.8           5.9          3.2      0.355494    False
  6     Iris-setosa           1.7          0.4           5.4          3.9      0.360018    False
 74 Iris-versicolor           4.7          1.2           6.1          2.8      0.361011    False
116  Iris-virginica           5.3          2.3           6.4          3.2      0.364586    False
 84 Iris-versicolor           5.1          1.6           6.0          2.7      0.367850    False
 91 Iris-versicolor           4.4          1.2           5.5          2.6      0.370719    False
 72 Iris-versicolor           4.0          1.3           6.1          2.8      0.372910    False
112  Iris-virginica           5.3          1.9           6.4          2.7      0.373868    False
 55 Iris-versicolor           4.6          1.5           6.5          2.8      0.375224    False
 17     Iris-setosa           1.3          0.4           5.4          3.9      0.376312    False
 14     Iris-setosa           1.1          0.1           4.3          3.0      0.377434    False
122  Iris-virginica           4.9          2.0           5.6          2.8      0.382455    False
114  Iris-virginica           5.0          2.0           5.7          2.5      0.385630    False
 33     Iris-setosa           1.5          0.1           5.2          4.1      0.389902    False
 57 Iris-versicolor           4.7          1.6           6.3          3.3      0.395904    False
111  Iris-virginica           5.1          2.0           6.5          3.2      0.396195    False
 34     Iris-setosa           1.4          0.2           5.5          4.2      0.397231    False
137  Iris-virginica           5.6          2.4           6.3          3.4      0.398480    False
 73 Iris-versicolor           4.9          1.5           6.3          2.5      0.398715    False
134  Iris-virginica           5.1          1.5           6.3          2.8      0.398736    False
 77 Iris-versicolor           4.8          1.4           6.8          2.8      0.403028    False
147  Iris-virginica           5.0          1.9           6.3          2.5      0.404182    False
 53 Iris-versicolor           4.9          1.5           6.9          3.1      0.404929    False
 51 Iris-versicolor           4.7          1.4           7.0          3.2      0.405780    False
142  Iris-virginica           5.1          2.3           6.9          3.1      0.420813    False
 80 Iris-versicolor           3.5          1.0           5.7          2.6      0.424564    False
 45     Iris-setosa           1.9          0.4           5.1          3.8      0.425323    False
 25     Iris-setosa           1.9          0.2           4.8          3.4      0.427507    False
103  Iris-virginica           5.9          2.1           7.1          3.0      0.431573    False
 86 Iris-versicolor           4.5          1.6           6.0          3.4      0.447126    False
131  Iris-virginica           6.1          1.9           7.4          2.8      0.448059    False
 19     Iris-setosa           1.7          0.3           5.7          3.8      0.451068    False
126  Iris-virginica           6.0          1.8           7.2          3.2      0.457343    False
149  Iris-virginica           5.4          2.3           6.2          3.4      0.468533    False
 85 Iris-versicolor           4.5          1.5           5.4          3.0      0.482262    False
108  Iris-virginica           6.3          1.8           7.3          2.9      0.482648    False
 65 Iris-versicolor           3.6          1.3           5.6          2.9      0.487902    False
 60 Iris-versicolor           3.9          1.4           5.2          2.7      0.496896    False
 15     Iris-setosa           1.2          0.2           5.8          4.0      0.513789    False
 23     Iris-setosa           1.0          0.2           4.6          3.6      0.518395    False
101  Iris-virginica           6.0          2.5           6.3          3.3      0.519844    False
130  Iris-virginica           5.8          1.6           7.2          3.0      0.527962    False
 88 Iris-versicolor           4.4          1.3           6.3          2.3      0.531071    False
115  Iris-virginica           5.1          2.4           5.8          2.8      0.533926    False
 69 Iris-versicolor           4.5          1.5           6.2          2.2      0.539667    False
 63 Iris-versicolor           4.0          1.0           6.0          2.2      0.544685    False
120  Iris-virginica           5.0          1.5           6.0          2.2      0.546572    False
 16     Iris-setosa           1.5          0.4           5.7          4.4      0.556295    False
109  Iris-virginica           5.8          1.8           6.7          2.5      0.602832    False
135  Iris-virginica           5.6          1.4           6.1          2.6      0.608343    False
136  Iris-virginica           6.1          2.3           7.7          3.0      0.664339    False
123  Iris-virginica           6.7          2.0           7.7          2.8      0.673671    False
 58 Iris-versicolor           3.3          1.0           4.9          2.4      0.716200    False
 42     Iris-setosa           1.3          0.3           4.5          2.3      0.736302    False
 99 Iris-versicolor           3.0          1.1           5.1          2.5      0.759912    False
107  Iris-virginica           4.5          1.7           4.9          2.5      0.810164    False
119  Iris-virginica           6.9          2.3           7.7          2.6      0.889493    False
110  Iris-virginica          61.0         25.0          72.0         36.0     12.240420    False
 78 Iris-versicolor          50.0         17.0          67.0         30.0     12.449288    False
 67 Iris-versicolor          45.0         15.0          56.0         30.0     13.099746    False
132  Iris-virginica          64.0         20.0          79.0         38.0     13.207079    False
118  Iris-virginica          67.0         22.0          77.0         38.0     13.461937    False
106  Iris-virginica          66.0         21.0          76.0         30.0     13.843757    False
 59 Iris-versicolor          46.0         13.0          66.0         29.0     14.053803    False
 22     Iris-setosa          15.0          4.0          51.0         37.0     14.140652     True
 21     Iris-setosa          17.0          2.0          54.0         34.0     14.514526     True
127  Iris-virginica          48.0         18.0          62.0         38.0     14.631644     True
  2     Iris-setosa          14.0          2.0          49.0         30.0     14.671703     True
 12     Iris-setosa          16.0         20.0          48.0         34.0     16.114105     True
  4     Iris-setosa          15.0         20.0          46.0         31.0     16.464817     True
 94 Iris-versicolor          33.0         10.0          50.0         23.0     16.878893     True
 61 Iris-versicolor          35.0         10.0          50.0         20.0     18.096639     True
</pre></div>
</div>
</div>
</div>
</section>
<section id="memisahkan-outlier-dari-data">
<h4>Memisahkan Outlier dari Data<a class="headerlink" href="#memisahkan-outlier-dari-data" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="kn">import</span> <span class="nn">pymysql</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span> <span class="p">,</span> <span class="n">KFold</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">LocalOutlierFactor</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span><span class="p">,</span> <span class="n">LabelEncoder</span><span class="p">,</span> <span class="n">Normalizer</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">classification_report</span>
<span class="kn">from</span> <span class="nn">sklearn.inspection</span> <span class="kn">import</span> <span class="n">DecisionBoundaryDisplay</span>

<span class="k">def</span> <span class="nf">get_pg_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;pendat23-posgreesql.g.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_ahuC43u5vzmRtJaxiSx&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;defaultdb&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">26340</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM iris_postgresql&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_mysql_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;mysql-aliridwan-mysql23.h.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_FuVRxg5O9IiRcCsBYdY&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;defaultdb&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">14789</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM irismysql&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Ambil data dari kedua database</span>
<span class="n">df_postgresql</span> <span class="o">=</span> <span class="n">get_pg_data</span><span class="p">()</span>
<span class="n">df_mysql</span> <span class="o">=</span> <span class="n">get_mysql_data</span><span class="p">()</span>

<span class="c1"># Gabungkan berdasarkan kolom &#39;id&#39; dan &#39;class&#39;</span>
<span class="n">df_merge</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_mysql</span><span class="p">,</span> <span class="n">df_postgresql</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="c1"># Ambil data fitur numerik tanpa kolom &#39;class&#39;</span>
<span class="n">feature_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">]</span>
<span class="n">data_values</span> <span class="o">=</span> <span class="n">df_merge</span><span class="p">[</span><span class="n">feature_columns</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Inisialisasi model LOF</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">LocalOutlierFactor</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">label</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">data_values</span><span class="p">)</span>

<span class="c1"># Tambahkan hasil label ke dataframe</span>
<span class="n">df_merge</span><span class="p">[</span><span class="s2">&quot;outlier_label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label</span>

<span class="c1"># Cetak hasil dengan ID dan class</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_merge</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="n">num_outliers</span> <span class="o">=</span> <span class="p">(</span><span class="n">label</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Jumlah outlier: </span><span class="si">{</span><span class="n">num_outliers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">df_filtered</span> <span class="o">=</span> <span class="n">df_merge</span><span class="p">[</span><span class="n">label</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;outlier_label&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">outliers</span> <span class="o">=</span> <span class="n">df_merge</span><span class="p">[</span><span class="n">label</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;outlier_label&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Data Outlier:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">outliers</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Jumlah data setelah dihapus : &quot;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">df_filtered</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Data tidak outlier :&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_filtered</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> id           class  petal_length  petal_width  sepal_length  sepal_width  outlier_label
  1     Iris-setosa           1.4          0.2           5.1          3.5              1
  2     Iris-setosa          14.0          2.0          49.0         30.0             -1
  3     Iris-setosa           1.3          0.2           4.7          3.2              1
  4     Iris-setosa          15.0         20.0          46.0         31.0             -1
  5     Iris-setosa           1.4          0.2           5.0          3.6              1
  6     Iris-setosa           1.7          0.4           5.4          3.9              1
  7     Iris-setosa           1.4          0.3           4.6          3.4              1
  8     Iris-setosa           1.5          0.2           5.0          3.4              1
  9     Iris-setosa           1.4          0.2           4.4          2.9              1
 10     Iris-setosa           1.5          0.1           4.9          3.1              1
 11     Iris-setosa           1.5          0.2           5.4          3.7              1
 12     Iris-setosa          16.0         20.0          48.0         34.0             -1
 13     Iris-setosa           1.4          0.1           4.8          3.0              1
 14     Iris-setosa           1.1          0.1           4.3          3.0              1
 15     Iris-setosa           1.2          0.2           5.8          4.0              1
 16     Iris-setosa           1.5          0.4           5.7          4.4              1
 17     Iris-setosa           1.3          0.4           5.4          3.9              1
 18     Iris-setosa           1.4          0.3           5.1          3.5              1
 19     Iris-setosa           1.7          0.3           5.7          3.8              1
 20     Iris-setosa           1.5          0.3           5.1          3.8              1
 21     Iris-setosa          17.0          2.0          54.0         34.0             -1
 22     Iris-setosa          15.0          4.0          51.0         37.0             -1
 23     Iris-setosa           1.0          0.2           4.6          3.6              1
 24     Iris-setosa           1.7          0.5           5.1          3.3              1
 25     Iris-setosa           1.9          0.2           4.8          3.4              1
 26     Iris-setosa           1.6          0.2           5.0          3.0              1
 27     Iris-setosa           1.6          0.4           5.0          3.4              1
 28     Iris-setosa           1.5          0.2           5.2          3.5              1
 29     Iris-setosa           1.4          0.2           5.2          3.4              1
 30     Iris-setosa           1.6          0.2           4.7          3.2              1
 31     Iris-setosa           1.6          0.2           4.8          3.1              1
 32     Iris-setosa           1.5          0.4           5.4          3.4              1
 33     Iris-setosa           1.5          0.1           5.2          4.1              1
 34     Iris-setosa           1.4          0.2           5.5          4.2              1
 35     Iris-setosa           1.5          0.1           4.9          3.1              1
 36     Iris-setosa           1.2          0.2           5.0          3.2              1
 37     Iris-setosa           1.3          0.2           5.5          3.5              1
 38     Iris-setosa           1.5          0.1           4.9          3.1              1
 39     Iris-setosa           1.3          0.2           4.4          3.0              1
 40     Iris-setosa           1.5          0.2           5.1          3.4              1
 41     Iris-setosa           1.3          0.3           5.0          3.5              1
 42     Iris-setosa           1.3          0.3           4.5          2.3              1
 43     Iris-setosa           1.3          0.2           4.4          3.2              1
 44     Iris-setosa           1.6          0.6           5.0          3.5              1
 45     Iris-setosa           1.9          0.4           5.1          3.8              1
 46     Iris-setosa           1.4          0.3           4.8          3.0              1
 47     Iris-setosa           1.6          0.2           5.1          3.8              1
 48     Iris-setosa           1.4          0.2           4.6          3.2              1
 49     Iris-setosa           1.5          0.2           5.3          3.7              1
 50     Iris-setosa           1.4          0.2           5.0          3.3              1
 51 Iris-versicolor           4.7          1.4           7.0          3.2              1
 52 Iris-versicolor           4.5          1.5           6.4          3.2              1
 53 Iris-versicolor           4.9          1.5           6.9          3.1              1
 54 Iris-versicolor           4.0          1.3           5.5          2.3              1
 55 Iris-versicolor           4.6          1.5           6.5          2.8              1
 56 Iris-versicolor           4.5          1.3           5.7          2.8              1
 57 Iris-versicolor           4.7          1.6           6.3          3.3              1
 58 Iris-versicolor           3.3          1.0           4.9          2.4              1
 59 Iris-versicolor          46.0         13.0          66.0         29.0             -1
 60 Iris-versicolor           3.9          1.4           5.2          2.7              1
 61 Iris-versicolor          35.0         10.0          50.0         20.0             -1
 62 Iris-versicolor           4.2          1.5           5.9          3.0              1
 63 Iris-versicolor           4.0          1.0           6.0          2.2              1
 64 Iris-versicolor           4.7          1.4           6.1          2.9              1
 65 Iris-versicolor           3.6          1.3           5.6          2.9              1
 66 Iris-versicolor           4.4          1.4           6.7          3.1              1
 67 Iris-versicolor          45.0         15.0          56.0         30.0             -1
 68 Iris-versicolor           4.1          1.0           5.8          2.7              1
 69 Iris-versicolor           4.5          1.5           6.2          2.2              1
 70 Iris-versicolor           3.9          1.1           5.6          2.5              1
 71 Iris-versicolor           4.8          1.8           5.9          3.2              1
 72 Iris-versicolor           4.0          1.3           6.1          2.8              1
 73 Iris-versicolor           4.9          1.5           6.3          2.5              1
 74 Iris-versicolor           4.7          1.2           6.1          2.8              1
 75 Iris-versicolor           4.3          1.3           6.4          2.9              1
 76 Iris-versicolor           4.4          1.4           6.6          3.0              1
 77 Iris-versicolor           4.8          1.4           6.8          2.8              1
 78 Iris-versicolor          50.0         17.0          67.0         30.0             -1
 79 Iris-versicolor           4.5          1.5           6.0          2.9              1
 80 Iris-versicolor           3.5          1.0           5.7          2.6              1
 81 Iris-versicolor           3.8          1.1           5.5          2.4              1
 82 Iris-versicolor           3.7          1.0           5.5          2.4              1
 83 Iris-versicolor           3.9          1.2           5.8          2.7              1
 84 Iris-versicolor           5.1          1.6           6.0          2.7              1
 85 Iris-versicolor           4.5          1.5           5.4          3.0              1
 86 Iris-versicolor           4.5          1.6           6.0          3.4              1
 87 Iris-versicolor           4.7          1.5           6.7          3.1              1
 88 Iris-versicolor           4.4          1.3           6.3          2.3              1
 89 Iris-versicolor           4.1          1.3           5.6          3.0              1
 90 Iris-versicolor           4.0          1.3           5.5          2.5              1
 91 Iris-versicolor           4.4          1.2           5.5          2.6              1
 92 Iris-versicolor           4.6          1.4           6.1          3.0              1
 93 Iris-versicolor           4.0          1.2           5.8          2.6              1
 94 Iris-versicolor          33.0         10.0          50.0         23.0             -1
 95 Iris-versicolor           4.2          1.3           5.6          2.7              1
 96 Iris-versicolor           4.2          1.2           5.7          3.0              1
 97 Iris-versicolor           4.2          1.3           5.7          2.9              1
 98 Iris-versicolor           4.3          1.3           6.2          2.9              1
 99 Iris-versicolor           3.0          1.1           5.1          2.5              1
100 Iris-versicolor           4.1          1.3           5.7          2.8              1
101  Iris-virginica           6.0          2.5           6.3          3.3              1
102  Iris-virginica           5.1          1.9           5.8          2.7              1
103  Iris-virginica           5.9          2.1           7.1          3.0              1
104  Iris-virginica           5.6          1.8           6.3          2.9              1
105  Iris-virginica           5.8          2.2           6.5          3.0              1
106  Iris-virginica          66.0         21.0          76.0         30.0             -1
107  Iris-virginica           4.5          1.7           4.9          2.5              1
108  Iris-virginica           6.3          1.8           7.3          2.9              1
109  Iris-virginica           5.8          1.8           6.7          2.5              1
110  Iris-virginica          61.0         25.0          72.0         36.0             -1
111  Iris-virginica           5.1          2.0           6.5          3.2              1
112  Iris-virginica           5.3          1.9           6.4          2.7              1
113  Iris-virginica           5.5          2.1           6.8          3.0              1
114  Iris-virginica           5.0          2.0           5.7          2.5              1
115  Iris-virginica           5.1          2.4           5.8          2.8              1
116  Iris-virginica           5.3          2.3           6.4          3.2              1
117  Iris-virginica           5.5          1.8           6.5          3.0              1
118  Iris-virginica          67.0         22.0          77.0         38.0             -1
119  Iris-virginica           6.9          2.3           7.7          2.6              1
120  Iris-virginica           5.0          1.5           6.0          2.2              1
121  Iris-virginica           5.7          2.3           6.9          3.2              1
122  Iris-virginica           4.9          2.0           5.6          2.8              1
123  Iris-virginica           6.7          2.0           7.7          2.8              1
124  Iris-virginica           4.9          1.8           6.3          2.7              1
125  Iris-virginica           5.7          2.1           6.7          3.3              1
126  Iris-virginica           6.0          1.8           7.2          3.2              1
127  Iris-virginica          48.0         18.0          62.0         38.0             -1
128  Iris-virginica           4.9          1.8           6.1          3.0              1
129  Iris-virginica           5.6          2.1           6.4          2.8              1
130  Iris-virginica           5.8          1.6           7.2          3.0              1
131  Iris-virginica           6.1          1.9           7.4          2.8              1
132  Iris-virginica          64.0         20.0          79.0         38.0             -1
133  Iris-virginica           5.6          2.2           6.4          2.8              1
134  Iris-virginica           5.1          1.5           6.3          2.8              1
135  Iris-virginica           5.6          1.4           6.1          2.6              1
136  Iris-virginica           6.1          2.3           7.7          3.0              1
137  Iris-virginica           5.6          2.4           6.3          3.4              1
138  Iris-virginica           5.5          1.8           6.4          3.1              1
139  Iris-virginica           4.8          1.8           6.0          3.0              1
140  Iris-virginica           5.4          2.1           6.9          3.1              1
141  Iris-virginica           5.6          2.4           6.7          3.1              1
142  Iris-virginica           5.1          2.3           6.9          3.1              1
143  Iris-virginica           5.1          1.9           5.8          2.7              1
144  Iris-virginica           5.9          2.3           6.8          3.2              1
145  Iris-virginica           5.7          2.5           6.7          3.3              1
146  Iris-virginica           5.2          2.3           6.7          3.0              1
147  Iris-virginica           5.0          1.9           6.3          2.5              1
148  Iris-virginica           5.2          2.0           6.5          3.0              1
149  Iris-virginica           5.4          2.3           6.2          3.4              1
150  Iris-virginica           5.1          1.8           5.9          3.0              1

Jumlah outlier: 15

Data Outlier:
 id           class  petal_length  petal_width  sepal_length  sepal_width
  2     Iris-setosa          14.0          2.0          49.0         30.0
  4     Iris-setosa          15.0         20.0          46.0         31.0
 12     Iris-setosa          16.0         20.0          48.0         34.0
 21     Iris-setosa          17.0          2.0          54.0         34.0
 22     Iris-setosa          15.0          4.0          51.0         37.0
 59 Iris-versicolor          46.0         13.0          66.0         29.0
 61 Iris-versicolor          35.0         10.0          50.0         20.0
 67 Iris-versicolor          45.0         15.0          56.0         30.0
 78 Iris-versicolor          50.0         17.0          67.0         30.0
 94 Iris-versicolor          33.0         10.0          50.0         23.0
106  Iris-virginica          66.0         21.0          76.0         30.0
110  Iris-virginica          61.0         25.0          72.0         36.0
118  Iris-virginica          67.0         22.0          77.0         38.0
127  Iris-virginica          48.0         18.0          62.0         38.0
132  Iris-virginica          64.0         20.0          79.0         38.0

Jumlah data setelah dihapus :  135

Data tidak outlier :
 id           class  petal_length  petal_width  sepal_length  sepal_width
  1     Iris-setosa           1.4          0.2           5.1          3.5
  3     Iris-setosa           1.3          0.2           4.7          3.2
  5     Iris-setosa           1.4          0.2           5.0          3.6
  6     Iris-setosa           1.7          0.4           5.4          3.9
  7     Iris-setosa           1.4          0.3           4.6          3.4
  8     Iris-setosa           1.5          0.2           5.0          3.4
  9     Iris-setosa           1.4          0.2           4.4          2.9
 10     Iris-setosa           1.5          0.1           4.9          3.1
 11     Iris-setosa           1.5          0.2           5.4          3.7
 13     Iris-setosa           1.4          0.1           4.8          3.0
 14     Iris-setosa           1.1          0.1           4.3          3.0
 15     Iris-setosa           1.2          0.2           5.8          4.0
 16     Iris-setosa           1.5          0.4           5.7          4.4
 17     Iris-setosa           1.3          0.4           5.4          3.9
 18     Iris-setosa           1.4          0.3           5.1          3.5
 19     Iris-setosa           1.7          0.3           5.7          3.8
 20     Iris-setosa           1.5          0.3           5.1          3.8
 23     Iris-setosa           1.0          0.2           4.6          3.6
 24     Iris-setosa           1.7          0.5           5.1          3.3
 25     Iris-setosa           1.9          0.2           4.8          3.4
 26     Iris-setosa           1.6          0.2           5.0          3.0
 27     Iris-setosa           1.6          0.4           5.0          3.4
 28     Iris-setosa           1.5          0.2           5.2          3.5
 29     Iris-setosa           1.4          0.2           5.2          3.4
 30     Iris-setosa           1.6          0.2           4.7          3.2
 31     Iris-setosa           1.6          0.2           4.8          3.1
 32     Iris-setosa           1.5          0.4           5.4          3.4
 33     Iris-setosa           1.5          0.1           5.2          4.1
 34     Iris-setosa           1.4          0.2           5.5          4.2
 35     Iris-setosa           1.5          0.1           4.9          3.1
 36     Iris-setosa           1.2          0.2           5.0          3.2
 37     Iris-setosa           1.3          0.2           5.5          3.5
 38     Iris-setosa           1.5          0.1           4.9          3.1
 39     Iris-setosa           1.3          0.2           4.4          3.0
 40     Iris-setosa           1.5          0.2           5.1          3.4
 41     Iris-setosa           1.3          0.3           5.0          3.5
 42     Iris-setosa           1.3          0.3           4.5          2.3
 43     Iris-setosa           1.3          0.2           4.4          3.2
 44     Iris-setosa           1.6          0.6           5.0          3.5
 45     Iris-setosa           1.9          0.4           5.1          3.8
 46     Iris-setosa           1.4          0.3           4.8          3.0
 47     Iris-setosa           1.6          0.2           5.1          3.8
 48     Iris-setosa           1.4          0.2           4.6          3.2
 49     Iris-setosa           1.5          0.2           5.3          3.7
 50     Iris-setosa           1.4          0.2           5.0          3.3
 51 Iris-versicolor           4.7          1.4           7.0          3.2
 52 Iris-versicolor           4.5          1.5           6.4          3.2
 53 Iris-versicolor           4.9          1.5           6.9          3.1
 54 Iris-versicolor           4.0          1.3           5.5          2.3
 55 Iris-versicolor           4.6          1.5           6.5          2.8
 56 Iris-versicolor           4.5          1.3           5.7          2.8
 57 Iris-versicolor           4.7          1.6           6.3          3.3
 58 Iris-versicolor           3.3          1.0           4.9          2.4
 60 Iris-versicolor           3.9          1.4           5.2          2.7
 62 Iris-versicolor           4.2          1.5           5.9          3.0
 63 Iris-versicolor           4.0          1.0           6.0          2.2
 64 Iris-versicolor           4.7          1.4           6.1          2.9
 65 Iris-versicolor           3.6          1.3           5.6          2.9
 66 Iris-versicolor           4.4          1.4           6.7          3.1
 68 Iris-versicolor           4.1          1.0           5.8          2.7
 69 Iris-versicolor           4.5          1.5           6.2          2.2
 70 Iris-versicolor           3.9          1.1           5.6          2.5
 71 Iris-versicolor           4.8          1.8           5.9          3.2
 72 Iris-versicolor           4.0          1.3           6.1          2.8
 73 Iris-versicolor           4.9          1.5           6.3          2.5
 74 Iris-versicolor           4.7          1.2           6.1          2.8
 75 Iris-versicolor           4.3          1.3           6.4          2.9
 76 Iris-versicolor           4.4          1.4           6.6          3.0
 77 Iris-versicolor           4.8          1.4           6.8          2.8
 79 Iris-versicolor           4.5          1.5           6.0          2.9
 80 Iris-versicolor           3.5          1.0           5.7          2.6
 81 Iris-versicolor           3.8          1.1           5.5          2.4
 82 Iris-versicolor           3.7          1.0           5.5          2.4
 83 Iris-versicolor           3.9          1.2           5.8          2.7
 84 Iris-versicolor           5.1          1.6           6.0          2.7
 85 Iris-versicolor           4.5          1.5           5.4          3.0
 86 Iris-versicolor           4.5          1.6           6.0          3.4
 87 Iris-versicolor           4.7          1.5           6.7          3.1
 88 Iris-versicolor           4.4          1.3           6.3          2.3
 89 Iris-versicolor           4.1          1.3           5.6          3.0
 90 Iris-versicolor           4.0          1.3           5.5          2.5
 91 Iris-versicolor           4.4          1.2           5.5          2.6
 92 Iris-versicolor           4.6          1.4           6.1          3.0
 93 Iris-versicolor           4.0          1.2           5.8          2.6
 95 Iris-versicolor           4.2          1.3           5.6          2.7
 96 Iris-versicolor           4.2          1.2           5.7          3.0
 97 Iris-versicolor           4.2          1.3           5.7          2.9
 98 Iris-versicolor           4.3          1.3           6.2          2.9
 99 Iris-versicolor           3.0          1.1           5.1          2.5
100 Iris-versicolor           4.1          1.3           5.7          2.8
101  Iris-virginica           6.0          2.5           6.3          3.3
102  Iris-virginica           5.1          1.9           5.8          2.7
103  Iris-virginica           5.9          2.1           7.1          3.0
104  Iris-virginica           5.6          1.8           6.3          2.9
105  Iris-virginica           5.8          2.2           6.5          3.0
107  Iris-virginica           4.5          1.7           4.9          2.5
108  Iris-virginica           6.3          1.8           7.3          2.9
109  Iris-virginica           5.8          1.8           6.7          2.5
111  Iris-virginica           5.1          2.0           6.5          3.2
112  Iris-virginica           5.3          1.9           6.4          2.7
113  Iris-virginica           5.5          2.1           6.8          3.0
114  Iris-virginica           5.0          2.0           5.7          2.5
115  Iris-virginica           5.1          2.4           5.8          2.8
116  Iris-virginica           5.3          2.3           6.4          3.2
117  Iris-virginica           5.5          1.8           6.5          3.0
119  Iris-virginica           6.9          2.3           7.7          2.6
120  Iris-virginica           5.0          1.5           6.0          2.2
121  Iris-virginica           5.7          2.3           6.9          3.2
122  Iris-virginica           4.9          2.0           5.6          2.8
123  Iris-virginica           6.7          2.0           7.7          2.8
124  Iris-virginica           4.9          1.8           6.3          2.7
125  Iris-virginica           5.7          2.1           6.7          3.3
126  Iris-virginica           6.0          1.8           7.2          3.2
128  Iris-virginica           4.9          1.8           6.1          3.0
129  Iris-virginica           5.6          2.1           6.4          2.8
130  Iris-virginica           5.8          1.6           7.2          3.0
131  Iris-virginica           6.1          1.9           7.4          2.8
133  Iris-virginica           5.6          2.2           6.4          2.8
134  Iris-virginica           5.1          1.5           6.3          2.8
135  Iris-virginica           5.6          1.4           6.1          2.6
136  Iris-virginica           6.1          2.3           7.7          3.0
137  Iris-virginica           5.6          2.4           6.3          3.4
138  Iris-virginica           5.5          1.8           6.4          3.1
139  Iris-virginica           4.8          1.8           6.0          3.0
140  Iris-virginica           5.4          2.1           6.9          3.1
141  Iris-virginica           5.6          2.4           6.7          3.1
142  Iris-virginica           5.1          2.3           6.9          3.1
143  Iris-virginica           5.1          1.9           5.8          2.7
144  Iris-virginica           5.9          2.3           6.8          3.2
145  Iris-virginica           5.7          2.5           6.7          3.3
146  Iris-virginica           5.2          2.3           6.7          3.0
147  Iris-virginica           5.0          1.9           6.3          2.5
148  Iris-virginica           5.2          2.0           6.5          3.0
149  Iris-virginica           5.4          2.3           6.2          3.4
150  Iris-virginica           5.1          1.8           5.9          3.0
</pre></div>
</div>
</div>
</div>
<p>Kode ini bertujuan untuk mendeteksi dan memisahkan outlier dari dataset yang bersumber dari dua basis data, yaitu PostgreSQL dan MySQL. Langkah pertama adalah membangun koneksi ke kedua basis data menggunakan pustaka <em>psycopg2</em> untuk PostgreSQL dan <em>pymysql</em> untuk MySQL. Setelah koneksi terjalin, query dijalankan untuk mengambil seluruh data dari tabel <code class="docutils literal notranslate"><span class="pre">iris_postgresql</span></code> dan <code class="docutils literal notranslate"><span class="pre">iris_mysql</span></code>. Data yang diperoleh kemudian dikonversi menjadi DataFrame menggunakan pustaka <em>pandas</em>.</p>
<p>Selanjutnya, kedua dataset tersebut digabungkan melalui metode <em>inner join</em> berdasarkan kolom <code class="docutils literal notranslate"><span class="pre">id</span></code> dan <code class="docutils literal notranslate"><span class="pre">class</span></code>, sehingga hanya data yang terdapat pada kedua tabel yang akan dipertahankan. Pada tahap berikutnya, hanya fitur numerik seperti <code class="docutils literal notranslate"><span class="pre">petal_length</span></code>, <code class="docutils literal notranslate"><span class="pre">petal_width</span></code>, <code class="docutils literal notranslate"><span class="pre">sepal_length</span></code>, dan <code class="docutils literal notranslate"><span class="pre">sepal_width</span></code> yang dipilih untuk proses deteksi outlier.</p>
<p>Untuk mendeteksi outlier, digunakan model <em>Local Outlier Factor</em> (LOF) dari pustaka <em>scikit-learn</em> dengan parameter <code class="docutils literal notranslate"><span class="pre">n_neighbors=90</span></code>. Parameter ini menentukan bahwa setiap data akan dinilai berdasarkan 90 tetangga terdekatnya untuk mengidentifikasi apakah data tersebut merupakan outlier. Model LOF akan memberikan label 1 pada data yang dianggap normal dan -1 pada data yang terdeteksi sebagai outlier.</p>
<p>Setelah penerapan model LOF, hasil deteksi outlier ditambahkan ke dalam DataFrame dalam kolom baru bernama <code class="docutils literal notranslate"><span class="pre">outlier_label</span></code>. Jumlah total outlier kemudian dihitung dengan menjumlahkan data yang memiliki label -1. Dataset dipisahkan menjadi dua bagian: data normal yang memiliki label 1 disimpan dalam variabel <code class="docutils literal notranslate"><span class="pre">df_filtered</span></code>, sedangkan data yang terdeteksi sebagai outlier disimpan dalam variabel <code class="docutils literal notranslate"><span class="pre">outliers</span></code>.</p>
<p>Sebagai output akhir, hasil deteksi ditampilkan dengan menyajikan dataset yang telah diberi label, jumlah total outlier yang ditemukan, serta daftar data yang termasuk dalam kategori outlier maupun data yang tetap setelah proses pembersihan. Langkah ini bertujuan untuk meningkatkan kualitas data dengan menghilangkan nilai ekstrem yang berpotensi menyebabkan bias dalam analisis atau model pembelajaran mesin.</p>
</section>
<section id="menghitung-akurasi-dari-data">
<h4>Menghitung Akurasi dari Data<a class="headerlink" href="#menghitung-akurasi-dari-data" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="n">feature_columns</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span>

<span class="c1"># Encode label kelas ke numerik</span>
<span class="n">label_encoder</span> <span class="o">=</span> <span class="n">LabelEncoder</span><span class="p">()</span>
<span class="n">y_encoded</span> <span class="o">=</span> <span class="n">label_encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Menerapkan LOF untuk deteksi outlier</span>
<span class="n">lof</span> <span class="o">=</span> <span class="n">LocalOutlierFactor</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">contamination</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">outlier_labels</span> <span class="o">=</span> <span class="n">lof</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outlier_labels</span>

<span class="c1"># Pisahkan data dengan outlier dan tanpa outlier</span>
<span class="n">df_cleaned</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">])</span>

<span class="c1"># Membagi data menjadi training (80%) dan testing (20%)</span>
<span class="n">X_train_all</span><span class="p">,</span> <span class="n">X_test_all</span><span class="p">,</span> <span class="n">y_train_all</span><span class="p">,</span> <span class="n">y_test_all</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
    <span class="n">X</span><span class="p">,</span> <span class="n">y_encoded</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
<span class="p">)</span>

<span class="n">X_train_clean</span><span class="p">,</span> <span class="n">X_test_clean</span><span class="p">,</span> <span class="n">y_train_clean</span><span class="p">,</span> <span class="n">y_test_clean</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
    <span class="n">df_cleaned</span><span class="p">[</span><span class="n">feature_columns</span><span class="p">],</span>
    <span class="n">label_encoder</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df_cleaned</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]),</span>
    <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
<span class="p">)</span>

<span class="c1"># Pipeline dengan StandardScaler dan KNN</span>
<span class="n">knn_pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;scaler&quot;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">()),</span>
    <span class="p">(</span><span class="s2">&quot;knn&quot;</span><span class="p">,</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">11</span><span class="p">))</span>
<span class="p">])</span>

<span class="c1"># Latih model pada data dengan outlier</span>
<span class="n">knn_pipeline</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_all</span><span class="p">,</span> <span class="n">y_train_all</span><span class="p">)</span>
<span class="n">y_pred_all</span> <span class="o">=</span> <span class="n">knn_pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_all</span><span class="p">)</span>
<span class="n">accuracy_all</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_all</span><span class="p">,</span> <span class="n">y_pred_all</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Akurasi dengan outlier:&quot;</span><span class="p">,</span> <span class="n">accuracy_all</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_all</span><span class="p">,</span> <span class="n">y_pred_all</span><span class="p">,</span> <span class="n">target_names</span><span class="o">=</span><span class="n">label_encoder</span><span class="o">.</span><span class="n">classes_</span><span class="p">))</span>

<span class="c1"># Latih model pada data tanpa outlier</span>
<span class="n">knn_pipeline</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_clean</span><span class="p">,</span> <span class="n">y_train_clean</span><span class="p">)</span>
<span class="n">y_pred_clean</span> <span class="o">=</span> <span class="n">knn_pipeline</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_clean</span><span class="p">)</span>
<span class="n">accuracy_clean</span> <span class="o">=</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test_clean</span><span class="p">,</span> <span class="n">y_pred_clean</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Akurasi tanpa outlier:&quot;</span><span class="p">,</span> <span class="n">accuracy_clean</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test_clean</span><span class="p">,</span> <span class="n">y_pred_clean</span><span class="p">,</span> <span class="n">target_names</span><span class="o">=</span><span class="n">label_encoder</span><span class="o">.</span><span class="n">classes_</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Akurasi dengan outlier: 0.9666666666666667
                 precision    recall  f1-score   support

    Iris-setosa       1.00      1.00      1.00        10
Iris-versicolor       0.90      1.00      0.95         9
 Iris-virginica       1.00      0.91      0.95        11

       accuracy                           0.97        30
      macro avg       0.97      0.97      0.97        30
   weighted avg       0.97      0.97      0.97        30

Akurasi tanpa outlier: 1.0
                 precision    recall  f1-score   support

    Iris-setosa       1.00      1.00      1.00        12
Iris-versicolor       1.00      1.00      1.00         7
 Iris-virginica       1.00      1.00      1.00         8

       accuracy                           1.00        27
      macro avg       1.00      1.00      1.00        27
   weighted avg       1.00      1.00      1.00        27
</pre></div>
</div>
</div>
</div>
<p>Kode ini dirancang untuk membandingkan akurasi dan hasil klasifikasi model <em>K-Nearest Neighbors</em> (KNN) pada dua kondisi dataset: satu yang masih mengandung outlier dan satu yang telah dibersihkan dari outlier.</p>
<p>Proses dimulai dengan mengekstraksi fitur numerik dari DataFrame yang telah digabungkan sebelumnya untuk digunakan dalam pemodelan. Selain itu, label kelas dikonversi ke format numerik menggunakan <em>LabelEncoder</em>. Model <em>Local Outlier Factor</em> (LOF) diterapkan kembali dengan parameter <code class="docutils literal notranslate"><span class="pre">n_neighbors=90</span></code> dan <code class="docutils literal notranslate"><span class="pre">contamination=0.1</span></code>, yang menandakan bahwa sekitar 10% data akan diidentifikasi sebagai outlier. Hasil deteksi ini ditambahkan ke dalam DataFrame sebagai kolom baru, kemudian dataset dibagi menjadi dua bagian: satu bagian dengan data asli yang masih mengandung outlier, dan satu lagi yang telah melalui proses pembersihan outlier.</p>
<p>Selanjutnya, kedua dataset tersebut dibagi menjadi data pelatihan (80%) dan data pengujian (20%) menggunakan fungsi <em>train_test_split</em>. Hal ini menghasilkan dua set data pelatihan dan pengujian—masing-masing untuk dataset dengan outlier dan tanpa outlier.</p>
<p>Model KNN dengan jumlah tetangga sebanyak 11 diterapkan menggunakan <em>Pipeline</em>, yang terlebih dahulu melakukan standarisasi data dengan <em>StandardScaler</em> sebelum melatih model KNN. Model pertama dilatih menggunakan data yang masih mengandung outlier, lalu dilakukan prediksi pada data uji. Hasil prediksi tersebut dibandingkan dengan label aslinya untuk menghitung akurasi serta menampilkan laporan klasifikasi yang mencakup metrik seperti <em>precision</em>, <em>recall</em>, dan <em>F1-score</em> untuk setiap kelas. Langkah yang sama diterapkan pada dataset yang telah dibersihkan dari outlier.</p>
<p>Sebagai hasil akhir, kode ini menampilkan dua nilai akurasi: satu untuk model yang dilatih dengan data yang masih mengandung outlier, dan satu lagi untuk model yang dilatih dengan data yang telah dibersihkan. Selain itu, laporan klasifikasi disajikan untuk menunjukkan dampak keberadaan outlier terhadap performa model. Umumnya, model yang dilatih pada data tanpa outlier diharapkan memberikan hasil yang lebih akurat, karena outlier berpotensi mengganggu perhitungan jarak pada algoritma KNN sehingga dapat menyebabkan prediksi yang keliru. Dengan membandingkan kedua hasil ini, pengguna dapat memahami sejauh mana outlier memengaruhi performa klasifikasi dan menentukan apakah pembersihan data berdampak positif terhadap hasil model.</p>
</section>
</section>
</section>
<div class="toctree-wrapper compound">
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Tugas1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tugas1 Data_mining</p>
      </div>
    </a>
    <a class="right-next"
       href="Local_Outlier_Factor.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Local Outlier Factor</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#penjelasan-outlier-deteksi"><strong>Penjelasan Outlier Deteksi</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier-dengan-k-nearest-neighbors-knn-dalam-data-understanding"><strong>Deteksi Outlier dengan K-Nearest Neighbors (KNN) dalam Data Understanding</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#pengantar-outlier-dalam-data-understanding">1. Pengantar Outlier dalam Data Understanding</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#konsep-k-nearest-neighbors-knn-dalam-deteksi-outlier">2. Konsep K-Nearest Neighbors (KNN) dalam Deteksi Outlier</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kapan-menggunakan-knn-untuk-deteksi-outlier">Kapan Menggunakan KNN untuk Deteksi Outlier?</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#perhitungan-k">Perhitungan K</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#kesimpulan">Kesimpulan</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#instalasi-library-pymysql-dan-psycopg2-untuk-koneksi-database-di-python">Instalasi Library PyMySQL dan Psycopg2 untuk Koneksi Database di Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#import-library-untuk-analisis-data-visualisasi-dan-koneksi-database-dengan-python">Import Library untuk Analisis Data, Visualisasi, dan Koneksi Database dengan Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fungsi-untuk-mengambil-data-dari-database-postgresql-menggunakan-python">Fungsi untuk Mengambil Data dari Database PostgreSQL menggunakan Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fungsi-untuk-mengambil-data-dari-database-mysql-menggunakan-python">Fungsi untuk Mengambil Data dari Database MySQL menggunakan Python</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier-pada-data-iris-menggunakan-k-nearest-neighbors-knn">Deteksi Outlier pada Data Iris menggunakan K-Nearest Neighbors (KNN)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#menghitung-jumlah-outlier-pada-data-iris-menggunakan-knn">Menghitung Jumlah Outlier pada Data Iris menggunakan KNN</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#menampilkan-daftar-outlier-yang-terdeteksi">Menampilkan daftar outlier yang terdeteksi</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mengurutkan-data-berdasarkan-jarak-knn-untuk-identifikasi-outlier">Mengurutkan Data Berdasarkan Jarak KNN untuk Identifikasi Outlier</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#memisahkan-outlier-dari-data">Memisahkan Outlier dari Data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#menghitung-akurasi-dari-data">Menghitung Akurasi dari Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By aliridwan15
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>